function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}$(document).ready(function(){"use strict";function e(e){var t,i,r;return e.find('.validate-required[type="checkbox"]').each(function(){$('[name="'+$(this).attr("name")+'"]:checked').length||(i=1,t=$(this).attr("name").replace("[]",""),e.find(".form-error").text("Please tick at least one "+t+" box."))}),$(e).find(".validate-required").each(function(){""===$(this).val()?($(this).addClass("field-error"),i=1):$(this).removeClass("field-error")}),$(e).find(".validate-email").each(function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$(this).removeClass("field-error"):($(this).addClass("field-error"),i=1)}),e.find(".field-error").length||e.find(".form-error").fadeOut(1e3),i}$("a").click(function(){return"#"===$(this).attr("href")?!1:void 0}),-1!=navigator.appVersion.indexOf("Win")&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&$(function(){var e=$(window),t=.4,i=350;e.on("mousewheel DOMMouseScroll",function(r){r.preventDefault();var s=r.originalEvent.wheelDelta/120||-r.originalEvent.detail/3,n=e.scrollTop(),a=n-parseInt(s*i);TweenMax.to(e,t,{scrollTo:{y:a,autoKill:!0},ease:Power1.easeOut,overwrite:5})})}),$(".mobile-toggle").click(function(){$("nav").toggleClass("open-menu")}),$(".background-image-holder").each(function(){var e=$(this).children("img").attr("src");$(this).css("background",'url("'+e+'")'),$(this).children("img").hide(),$(this).css("background-position","50% 50%")}),$(".foreground-image-holder").each(function(){var e=$(this).children("img").attr("src");$(this).css("background",'url("'+e+'")'),$(this).children("img").hide(),$(this).css("background-position","50% 50%")}),$(".ytplayer").each(function(){var e=$(this).attr("data-video-id");$(this).attr("data-property","{videoURL:'"+e+"',containment:'.video-holder',autoPlay:true, mute:true, startAt:28,opacity:1}")}),$(window).scroll(function(){$(window).scrollTop()>0?$("nav").addClass("scrolled"):$("nav").removeClass("scrolled")}),$("nav").hasClass("relative-nav")&&$(".nav-container").css("height",$("nav").outerHeight()),$(".nav-2 .menu-toggle").click(function(){$(this).toggleClass("form-cross"),$(this).closest("nav").find(".menu").toggleClass("expand")}),$(".nav-3 .menu-toggle").click(function(){$(this).toggleClass("form-cross"),$(this).closest("nav").find(".fullscreen-container").toggleClass("expand"),setTimeout(function(){$(".fullscreen-container .vertical-align").toggleClass("show-menu")},300)}),$("a").click(function(){return"#"==$(this).attr("href")?!1:void 0}),$(".search-bar i").click(function(){$(this).closest(".search-bar").find('input[type="text"]').focus(),$(this).closest(".search-bar").find('input[type="text"]').val()&&$(this).closest(".search-bar").find('input[type="submit"]').trigger("click")}),$(".expanding-list .title").click(function(){$(this).closest("li").toggleClass("active")}),$(".add-to-cart .less").click(function(){if($(this).closest("form").find('input[type="text"]').val()>=1){var e=parseInt($(this).closest("form").find('input[type="text"]').val())-1;$(this).closest("form").find('input[type="text"]').val(e)}}),$(".add-to-cart .more").click(function(){var e=parseInt($(this).closest("form").find('input[type="text"]').val())+1;$(this).closest("form").find('input[type="text"]').val(e)}),/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)||(skrollr.init({forceHeight:!1}),$(window).scroll(function(){if($(window).scrollTop()<$(".fixed-header").outerHeight()){var e=$(window).scrollTop();$(".fixed-header").css({transform:"translateY("+e/1.2+"px)"}),$(".fixed-header .container").css("opacity",1-e/400)}}),$(".hover-background").each(function(){$(this).mousemove(function(e){$(this).find(".background-image-holder").css("transform","translate("+-e.pageX/18+"px,"+-(e.pageY-$(window).scrollTop())/50+"px)"),$(this).find(".layer-1").css("transform","translate("+-e.pageX/30+"px,"+-e.pageY/30+"px)"),$(this).find(".layer-2").css("transform","translate("+-e.pageX/20+"px,"+-e.pageY/20+"px)")})})),$(".promo-1 .btn").mouseenter(function(){$(this).closest(".promo-1").find(".promo-image-holder").css("transform","scale(1.05)")}).mouseleave(function(){$(this).closest(".promo-1").find(".promo-image-holder").css("transform","scale(1)")}),$(".hover-content").mouseenter(function(){$(this).closest(".project").find(".background-image-holder").addClass("zoom")}).mouseleave(function(){$(this).closest(".project").find(".background-image-holder").removeClass("zoom")}),$(".contained-projects").each(function(){var e="";$(this).find(".project").each(function(){var t=$(this).attr("data-filter").split(",");t.forEach(function(t){-1==e.indexOf(t)&&(e+='<li data-filter="'+t+'">'+capitaliseFirstLetter(t)+"</li>")}),$(this).closest(".contained-projects").find("ul.filters").empty().append('<li data-filter="all" class="active">All</li>').append(e)})}),$(".filters li").click(function(){var e=$(this).attr("data-filter");$(this).closest(".filters").find("li").removeClass("active"),$(this).addClass("active"),$(this).closest(".contained-projects").find(".project").each(function(){var t=$(this).data("filter");-1==t.indexOf(e)?$(this).addClass("inactive"):$(this).removeClass("inactive")}),"all"==e&&$(this).closest(".contained-projects").find(".project").removeClass("inactive")}),$(".video-strip .pre-video i").click(function(){$(this).closest(".pre-video").addClass("fade-off"),$(this).closest(".video-strip").find(".iframe-holder").addClass("show-iframe");var e=$(this);setTimeout(function(){e.closest(".video-strip").find(".iframe-holder").addClass("fade-on")},500)}),$(".video-strip .close-frame").click(function(){$(this).closest(".iframe-holder").removeClass("fade-on");var e=$(this);setTimeout(function(){e.closest(".video-strip").find(".iframe-holder").removeClass("show-iframe"),e.closest(".video-strip").find(".pre-video").removeClass("fade-off")},500)}),$(".hero-slider").flexslider({directionNav:!1}),$(".testimonials").flexslider({directionNav:!1}),$(".image-slider").flexslider({directionNav:!1}),$(".tweets-feed").each(function(e){$(this).attr("id","tweets-"+e)}).each(function(e){function t(t){for(var i=t.length,r=0,s=document.getElementById("tweets-"+e),n='<ul class="slides">';i>r;)n+="<li>"+t[r]+"</li>",r++;return n+="</ul>",s.innerHTML=n,n}twitterFetcher.fetch($("#tweets-"+e).attr("data-widget-id"),"",5,!0,!0,!0,"",!1,t)}),$(".instafeed").each(function(){$(this).children("ul").spectragram("getUserFeed",{query:$(this).attr("data-user-name")})}),$(".countdown").each(function(){$(this).countdown({until:new Date($(this).attr("data-date"))})}),$(".planner-option").click(function(){$(this).toggleClass("active"),$(this).children("input").is(":checked")?$(this).children("input").prop("checked",!1):$(this).children("input").prop("checked",!0)}),$(".planner-option,.planner-radio").each(function(){var e=$(this).find("span").text();$(this).find("input").attr("value",e)}),$(".mock-radio").click(function(){$(this).closest(".radio-group").find(".mock-radio").removeClass("active"),$(this).toggleClass("active"),$(this).closest(".planner-radio").children("input").is(":checked")?$(this).closest(".planner-radio").children("input").prop("checked",!1):$(this).closest(".planner-radio").children("input").prop("checked",!0)}),$("form.email-form, form.project-planner").submit(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=$(this).closest("form"),r=0,s=i.attr("original-error"),n;return"string"!=typeof s&&s!==!1&&i.find(".form-error").text(s),r=e(i),1===r?$(this).closest("form").find(".form-error").fadeIn(200):($(this).closest("form").find(".form-error").fadeOut(200),n=$("<div />").addClass("form-loading").insertAfter($(i).find('input[type="submit"]')),$(i).find('input[type="submit"]').hide(),jQuery.ajax({type:"POST",url:"mail/mail.php",data:i.serialize(),success:function(e){$(i).find(".form-loading").remove(),$(i).find('input[type="submit"]').show(),$.isNumeric(e)?parseInt(e)>0&&(i.find(".form-success").fadeIn(1e3),i.find(".form-error").fadeOut(1e3),setTimeout(function(){i.find(".form-success").fadeOut(500)},5e3)):(i.find(".form-error").attr("original-error",i.find(".form-error").text()),i.find(".form-error").text(e).fadeIn(1e3),i.find(".form-success").fadeOut(1e3))},error:function(e,t,r){i.find(".form-error").attr("original-error",i.find(".form-error").text()),i.find(".form-error").text(r).fadeIn(1e3),i.find(".form-success").fadeOut(1e3),$(i).find(".form-loading").remove(),$(i).find('input[type="submit"]').show()}})),!1}),$(".validate-required, .validate-email").on("blur change",function(){e($(this).closest("form"))}),$("form").each(function(){$(this).find(".form-error").length&&$(this).attr("original-error",$(this).find(".form-error").text())}),$(".map-holder").click(function(){$(this).addClass("disable-overlay")}),$(window).scroll(function(){$(".map-holder").removeClass("disable-overlay")})}),$(window).load(function(){if($("nav").hasClass("nav-2"))$(".inner-link").smoothScroll({offset:-55,speed:800});else{var e=$("nav").outerHeight();$(".inner-link").smoothScroll({offset:-e,speed:800})}var t=setInterval(function(){return $(".tweets-slider").find("li.flex-active-slide").length?void clearInterval(t):void($(".tweets-slider").length&&$(".tweets-slider").flexslider({directionNav:!1,controlNav:!1}))},500);$(".background-image-holder").addClass("fadeIn"),$(".foreground-image-holder").addClass("fadeIn"),$("form.mail-list-signup").on("submit",function(){var e=$(this).closest("section, header, footer").find("iframe.mail-list-form"),t=$(this).closest(".mail-list-signup"),i=$(this).find(".signup-email-field").val(),r=$(this).find(".signup-name-field").val(),s=$(this).find(".signup-first-name-field").val(),n=$(this).find(".signup-last-name-field").val(),a=0;return $(t).find(".validate-required").each(function(){""===$(this).val()?($(this).addClass("field-error"),a=1):$(this).removeClass("field-error")}),$(t).find(".validate-email").each(function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$(this).removeClass("field-error"):($(this).addClass("field-error"),a=1)}),0===a&&(e.contents().find("#mce-EMAIL, #fieldEmail").val(i),e.contents().find("#mce-LNAME, #fieldLastName").val(n),e.contents().find("#mce-FNAME, #fieldFirstName").val(s),e.contents().find("#mce-FNAME, #fieldName").val(r),e.contents().find("form").attr("target","_blank").submit()),!1});var i=setInterval(function(){return $(".instafeed li").hasClass("bg-added")?void clearInterval(i):($(".instafeed li").each(function(){var e=$(this).find("img").attr("src");$(this).css("background",'url("'+e+'")'),$(this).find("img").css("opacity",0),$(this).css("background-position","50% 0%"),$(this).addClass("bg-added")}),void $(".instafeed").addClass("fadeIn"))},500)});