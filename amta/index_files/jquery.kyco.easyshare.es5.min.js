"use strict";var kyco=kyco||{};kyco.apiPath="/utils/jquery.kyco.easyshare/api/easyshare.ashx";kyco.easyShare=function(){$("[data-easyshare]").length>0&&$("[data-easyshare]").each(function(){var n=$(this),i=n.data("easyshare-url"),s=n.data("easyshare-title"),t=typeof i=="undefined"||i===""?window.location.href:i,r=n.find("[data-easyshare-total-count]"),u=n.find('[data-easyshare-button-count="facebook"]'),f=n.find('[data-easyshare-button-count="twitter"]'),e=n.find('[data-easyshare-button-count="google"]'),o=n.find("[data-easyshare-loader]");$.ajax({url:kyco.apiPath,type:"GET",data:{url:t},dataType:"json",success:function(n){r.html(kyco.easyShareApproximate(n.Total));u.html(kyco.easyShareApproximate(n.Facebook));f.html(kyco.easyShareApproximate(n.Twitter));e.html(kyco.easyShareApproximate(n.Google));o.fadeOut(500)},error:function(){r.html(0);u.html(0);f.html(0);e.html(0);o.fadeOut(500)}});n.find('[data-easyshare-button="facebook"]').click(function(){var n=500,i=400,r=($(window).width()-n)/2,u=($(window).height()-i)/2,f="https://www.facebook.com/sharer/sharer.php?u="+t,e="width="+n+",height="+i+",top="+u+",left="+r;window.open(f,"facebook",e)});n.find('[data-easyshare-button="twitter"]').click(function(){var i=$(this).data("easyshare-tweet-text")||"",n=575,t=440,r=($(window).width()-n)/2,u=($(window).height()-t)/2,f="http://twitter.com/share?text="+encodeURIComponent(i),e="status=1,width="+n+",height="+t+",top="+u+",left="+r;window.open(f,"twitter",e)});n.find('[data-easyshare-button="google"]').click(function(){var n=500,i=400,r=($(window).width()-n)/2,u=($(window).height()-i)/2,f="https://plus.google.com/share?url="+t,e="width="+n+",height="+i+",top="+u+",left="+r;window.open(f,"google+",e)});n.find('[data-easyshare-button="email"]').click(function(){var i="mailto:?body="+t+"&subject="+s+"",n=$('<a href="'+i+'" style="display:none">.<\/a>');$("body").append(n);n[0].click()})})};kyco.easyShareAddCommas=function(n){var t=[],i=Math.round(n).toString().split("");return n<1e3?n.toString():(i.reverse().forEach(function(n,i){i&&i%3==0&&t.push(",");t.push(n)}),t.reverse().join(""))};kyco.easyShareFormatDecimals=function(n,t){var i=n/t;return i<10?Math.round(i*10)/10:Math.round(i)};kyco.easyShareApproximate=function(n){var i=n<0,t;return i&&(n=Math.abs(n)),t=n<1e4?kyco.easyShareAddCommas(n):n<1e6?kyco.easyShareFormatDecimals(n,1e3)+"k":n<1e9?kyco.easyShareFormatDecimals(n,1e6)+"m":kyco.easyShareAddCommas(kyco.easyShareFormatDecimals(n,1e9))+"b",i&&(t="-"+t),t};$(document).ready(function(){kyco.easyShare()});